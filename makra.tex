\useoptex

\_namespace{scenar}

\_def\.beginscenar{
    \_initunifonts               
    \chyph                      % české vzory dělení slov
    \_fontfam[source pro]
    \_margins/1 a4 (2.5,2.5,2.5,2.5)cm   % okraje 2.5 cm, strana A4
    \_typosize[12/20]
    \_activettchar"
    \_hyperlinks\_Blue\_Blue
    \_parindent=0pt
    \_load[vlna]
    % \_parskip\_smallskipamount
    \_parskip\_medskipamount

    % \elight\rm
    % \light\rm
    % \rm
    % \light\bf
    % \sans\light\rm
    % \sans\rm

    % \ttset\rm
% % 
    % \rightskip = 0pt plus1fill
}

% --------------------------------------------------------

% Definition of \pop
% Description of events in cursive
\_def\.pop#1\par{\_medskip{\_it #1\par}\_medskip}

% --------------------------------------------------------

\_def\_newpublic #1#2{\_unless\_ifx #2\_undefined
    \_opwarning{\_string#2 is redefined%
    \_ifx\_pkglabel\_empty \_else\_space by the \_ea\_ignoreit\_pkglabel\_space package\_fi}\_fi
    #1#2%
}

% Definition of \rep
% Dialogue
% Changes \pop inside to include ()
\_newdimen\.repindent
\.repindent=3.5cm
\_def\.rep#1:#2\par{{\_def\pop##1{{\_it(##1)}}%
                        \_nsprivate \pop ;
                    \_leavevmode\_hbox to \_the\.repindent {\_uppercase{#1}\_hfil}%
                    \_hangindent=\_the\.repindent\_hangafter=1%
                    #2\par}}


% --------------------------------------------------------
% \scene, print Scene with possible name

\_global\_newcount\.scenenum
\.scenenum=1
\_def\.sceneheader{Scéna \_the\.scenenum \_global\_advance\.scenenum by 1}

\_eoldef\.scene#1{%
    \_removelastskip\_bigbreak
    {\_typosize[14/22]
    \.sceneheader 
    \if$#1$ % uses $ symbol to determine empty parameter - prayer to all gods no one uses $ here :D
        \else \ -- #1 
        \fi 
    \par
    \_nobreak\_vskip0pt}
} 

% --------------------------------------------------------
% \act print new act on new page with possible name

\_global\_newcount\.actnum
\.actnum=1
\_def\.actheader{Dějství \_the\.actnum \_global\_advance\.actnum by 1}

\_eoldef\.act#1{
    \_vfill\_break
    {\_typosize[16/22]
     \.actheader
     \if$#1$ % uses $ symbol to determine empty parameter - prayer to all gods no one uses $ here :D
        \else \ -- #1 
        \fi 
    \par
    \_nobreak\_vskip0pt}
}
% --------------------------------------------------------

% Declaring commands to public
\_nspublic \rep \pop \act \scene \beginscenar ;

\_endnamespace